#!python
#
#    Copyright (c) 2009-2015 Tom Keffer <tkeffer@gmail.com>
#
#    See the file LICENSE.txt for your rights.
#
"""Entry point to the nimbus weather system."""

from optparse import OptionParser

import nimbusmain.engine

usagestr = """
  %prog config_file [--daemon] [--pidfile=PIDFILE] [--loop-on-init]
                     [--version] [--help]

  Entry point to the nimbus weather program. Can be run directly, or as a daemon
  by specifying the '--daemon' option.
"""


def parseArgs():
    """Parse any command line options."""

    parser = OptionParser(usage=usagestr)
    parser.add_option("-d", "--daemon", action="store_true", dest="daemon", help="Run as a daemon")
    parser.add_option("-p", "--pidfile", type="string", dest="pidfile", help="Path to process ID file", default="/var/run/nimbus.pid")
    parser.add_option("-v", "--version", action="store_true", dest="version", help="Display version number then exit")
    parser.add_option("-r", "--loop-on-init", action="store_true", dest="loop_on_init", help="Retry forever if device is not ready on startup")
    (options, args) = parser.parse_args()

    return options


options = parseArgs()

nimbusmain.engine.main(options)
