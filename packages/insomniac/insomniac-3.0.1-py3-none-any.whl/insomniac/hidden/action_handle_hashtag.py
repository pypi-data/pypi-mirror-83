from functools import partial

from insomniac.device_facade import DeviceFacade
from insomniac.hidden.activation import print_activation_required_to
from insomniac.interaction import is_follow_limit_reached_for_source, interact_with_user, is_in_interaction_rect
from insomniac.navigation import search_for
from insomniac.storage import FollowingStatus
from insomniac.utils import *


import base64

code = base64.b64decode(b'ZGVmIGhhbmRsZV9oYXNodGFnKGRldmljZSwKICAgICAgICAgICAgICAgICAgIGhhc2h0YWcsCiAgICAgICAgICAgICAgICAgICBzZXNzaW9uX3N0YXRlLAogICAgICAgICAgICAgICAgICAgbGlrZXNfY291bnQsCiAgICAgICAgICAgICAgICAgICBmb2xsb3dfcGVyY2VudGFnZSwKICAgICAgICAgICAgICAgICAgIGZvbGxvd19saW1pdCwKICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UsCiAgICAgICAgICAgICAgICAgICBwcm9maWxlX2ZpbHRlciwKICAgICAgICAgICAgICAgICAgIG9uX2xpa2UsCiAgICAgICAgICAgICAgICAgICBvbl9pbnRlcmFjdGlvbiwKICAgICAgICAgICAgICAgICAgIGFjdGl2YXRpb25fY29udHJvbGxlcik6CiAgICBpZiBub3QgYWN0aXZhdGlvbl9jb250cm9sbGVyLmlzX2FjdGl2YXRlZDoKICAgICAgICBwcmludF9hY3RpdmF0aW9uX3JlcXVpcmVkX3RvKGYiaW50ZXJhY3QgYnkgaGFzaHRhZyAje2hhc2h0YWd9IikKICAgICAgICBwcmludF90aW1lbGVzcyhmIlRvIGludGVyYWN0IHdpdGggdXNlciBAe2hhc2h0YWd9LCB1c2UgIiArCiAgICAgICAgICAgICAgICAgICAgICAgQ09MT1JfQk9MRCArIGYicHl0aG9uMyBzdGFydC5weSAtLWludGVyYWN0IEB7aGFzaHRhZ30iICsgQ09MT1JfRU5EQykKICAgICAgICByZXR1cm4KCiAgICBpbnRlcmFjdGlvbiA9IHBhcnRpYWwoaW50ZXJhY3Rfd2l0aF91c2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgIG15X3VzZXJuYW1lPXNlc3Npb25fc3RhdGUubXlfdXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGlrZXNfY291bnQ9bGlrZXNfY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9sbG93X3BlcmNlbnRhZ2U9Zm9sbG93X3BlcmNlbnRhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgb25fbGlrZT1vbl9saWtlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGVfZmlsdGVyPXByb2ZpbGVfZmlsdGVyKQoKICAgIGlzX2ZvbGxvd19saW1pdF9yZWFjaGVkID0gcGFydGlhbChpc19mb2xsb3dfbGltaXRfcmVhY2hlZF9mb3Jfc291cmNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25fc3RhdGU9c2Vzc2lvbl9zdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xsb3dfbGltaXQ9Zm9sbG93X2xpbWl0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZT1oYXNodGFnKQoKICAgIGlmIG5vdCBzZWFyY2hfZm9yKGRldmljZSwgaGFzaHRhZz1oYXNodGFnKToKICAgICAgICByZXR1cm4KCiAgICAjIFN3aXRjaCB0byBSZWNlbnQgdGFiCiAgICBwcmludCgiU3dpdGNoaW5nIHRvIFJlY2VudCB0YWIiKQogICAgdGFiX2xheW91dCA9IGRldmljZS5maW5kKHJlc291cmNlSWQ9J2NvbS5pbnN0YWdyYW0uYW5kcm9pZDppZC90YWJfbGF5b3V0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2FuZHJvaWQud2lkZ2V0LkxpbmVhckxheW91dCcpCiAgICB0YWJfbGF5b3V0LmNoaWxkKGluZGV4PTEpLmNsaWNrKCkKICAgIHJhbmRvbV9zbGVlcCgpCgogICAgIyBPcGVuIGZpcnN0IHBvc3QKICAgIHByaW50KCJPcGVuaW5nIHRoZSBmaXJzdCBwb3N0IikKICAgIGZpcnN0X3Bvc3RfdmlldyA9IGRldmljZS5maW5kKHJlc291cmNlSWQ9J2NvbS5pbnN0YWdyYW0uYW5kcm9pZDppZC9pbWFnZV9idXR0b24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdhbmRyb2lkLndpZGdldC5JbWFnZVZpZXcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9MSkKICAgIGZpcnN0X3Bvc3Rfdmlldy5jbGljaygpCiAgICByYW5kb21fc2xlZXAoKQoKICAgIHBvc3RzX2xpc3RfdmlldyA9IGRldmljZS5maW5kKHJlc291cmNlSWQ9J2FuZHJvaWQ6aWQvbGlzdCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2FuZHJvaWR4LnJlY3ljbGVydmlldy53aWRnZXQuUmVjeWNsZXJWaWV3JykKICAgIHBvc3RzX2VuZF9kZXRlY3RvciA9IFBvc3RzRW5kRGV0ZWN0b3IoKQoKICAgIHdoaWxlIFRydWU6CiAgICAgICAgaWYgbm90IF9vcGVuX2xpa2VycyhkZXZpY2UpOgogICAgICAgICAgICBwcmludChDT0xPUl9PS0dSRUVOICsgIk5vIGxpa2VzLCBsZXQncyBzY3JvbGwgZG93bi4iICsgQ09MT1JfRU5EQykKICAgICAgICAgICAgcG9zdHNfbGlzdF92aWV3LnNjcm9sbChEZXZpY2VGYWNhZGUuRGlyZWN0aW9uLkJPVFRPTSkKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgcHJpbnQoIkxpc3Qgb2YgbGlrZXJzIGlzIG9wZW5lZC4iKQogICAgICAgIHBvc3RzX2VuZF9kZXRlY3Rvci5ub3RpZnlfbGlrZXJzX29wZW5lZCgpCiAgICAgICAgcmFuZG9tX3NsZWVwKCkKICAgICAgICBsaWtlc19saXN0X3ZpZXcgPSBkZXZpY2UuZmluZChyZXNvdXJjZUlkPSdhbmRyb2lkOmlkL2xpc3QnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYW5kcm9pZC53aWRnZXQuTGlzdFZpZXcnKQogICAgICAgIHByZXZfc2NyZWVuX2l0ZXJhdGVkX2xpa2VycyA9IFtdCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgcHJpbnQoIkl0ZXJhdGUgb3ZlciB2aXNpYmxlIGxpa2Vycy4iKQogICAgICAgICAgICBzY3JlZW5faXRlcmF0ZWRfbGlrZXJzID0gW10KCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZvciBpdGVtIGluIGRldmljZS5maW5kKHJlc291cmNlSWQ9J2NvbS5pbnN0YWdyYW0uYW5kcm9pZDppZC9yb3dfdXNlcl9jb250YWluZXJfYmFzZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2FuZHJvaWQud2lkZ2V0LkxpbmVhckxheW91dCcpOgogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lX3ZpZXcgPSBpdGVtLmNoaWxkKHJlc291cmNlSWQ9J2NvbS5pbnN0YWdyYW0uYW5kcm9pZDppZC9yb3dfdXNlcl9wcmltYXJ5X25hbWUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYW5kcm9pZC53aWRnZXQuVGV4dFZpZXcnKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB1c2VybmFtZV92aWV3LmV4aXN0cyhxdWljaz1UcnVlKToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ09MT1JfT0tHUkVFTiArICJOZXh0IGl0ZW0gbm90IGZvdW5kOiBwcm9iYWJseSByZWFjaGVkIGVuZCBvZiB0aGUgc2NyZWVuLiIgKyBDT0xPUl9FTkRDKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lX3ZpZXcuZ2V0X3RleHQoKQogICAgICAgICAgICAgICAgICAgIHNjcmVlbl9pdGVyYXRlZF9saWtlcnMuYXBwZW5kKHVzZXJuYW1lKQogICAgICAgICAgICAgICAgICAgIHBvc3RzX2VuZF9kZXRlY3Rvci5ub3RpZnlfdXNlcm5hbWVfaXRlcmF0ZWQodXNlcm5hbWUpCgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzdG9yYWdlLmNoZWNrX3VzZXJfd2FzX2ludGVyYWN0ZWQodXNlcm5hbWUpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiQCIgKyB1c2VybmFtZSArICI6IGludGVyYWN0IikKICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWVfdmlldy5jbGljaygpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkAiICsgdXNlcm5hbWUgKyAiOiBhbHJlYWR5IGludGVyYWN0ZWQuIFNraXAuIikKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgY2FuX2ZvbGxvdyA9IG5vdCBpc19mb2xsb3dfbGltaXRfcmVhY2hlZCgpIFwKICAgICAgICAgICAgICAgICAgICAgICAgYW5kIHN0b3JhZ2UuZ2V0X2ZvbGxvd2luZ19zdGF0dXModXNlcm5hbWUpID09IEZvbGxvd2luZ1N0YXR1cy5OT05FCgogICAgICAgICAgICAgICAgICAgIGludGVyYWN0aW9uX3N1Y2NlZWQsIGZvbGxvd2VkID0gaW50ZXJhY3Rpb24oZGV2aWNlLCB1c2VybmFtZT11c2VybmFtZSwgY2FuX2ZvbGxvdz1jYW5fZm9sbG93KQogICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UuYWRkX2ludGVyYWN0ZWRfdXNlcih1c2VybmFtZSwgZm9sbG93ZWQ9Zm9sbG93ZWQpCiAgICAgICAgICAgICAgICAgICAgY2FuX2NvbnRpbnVlID0gb25faW50ZXJhY3Rpb24oc3VjY2VlZD1pbnRlcmFjdGlvbl9zdWNjZWVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGxvd2VkPWZvbGxvd2VkKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBjYW5fY29udGludWU6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgICAgICAgICBwcmludCgiQmFjayB0byBsaWtlcnMgbGlzdCIpCiAgICAgICAgICAgICAgICAgICAgZGV2aWNlLmJhY2soKQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHByaW50KENPTE9SX0ZBSUwgKyAiQ2Fubm90IGdldCBuZXh0IGl0ZW06IHByb2JhYmx5IHJlYWNoZWQgZW5kIG9mIHRoZSBzY3JlZW4uIiArIENPTE9SX0VOREMpCgogICAgICAgICAgICBpZiBzY3JlZW5faXRlcmF0ZWRfbGlrZXJzID09IHByZXZfc2NyZWVuX2l0ZXJhdGVkX2xpa2VyczoKICAgICAgICAgICAgICAgIHByaW50KENPTE9SX09LR1JFRU4gKyAiSXRlcmF0ZWQgZXhhY3RseSB0aGUgc2FtZSBsaWtlcnMgdHdpY2UsIGZpbmlzaC4iICsgQ09MT1JfRU5EQykKICAgICAgICAgICAgICAgIHByaW50KGYiQmFjayB0byAje2hhc2h0YWd9IikKICAgICAgICAgICAgICAgIGRldmljZS5iYWNrKCkKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBwcmV2X3NjcmVlbl9pdGVyYXRlZF9saWtlcnMuY2xlYXIoKQogICAgICAgICAgICBwcmV2X3NjcmVlbl9pdGVyYXRlZF9saWtlcnMgKz0gc2NyZWVuX2l0ZXJhdGVkX2xpa2VycwoKICAgICAgICAgICAgcHJpbnQoQ09MT1JfT0tHUkVFTiArICJOZWVkIHRvIHNjcm9sbCBub3ciICsgQ09MT1JfRU5EQykKICAgICAgICAgICAgbGlrZXNfbGlzdF92aWV3LnNjcm9sbChEZXZpY2VGYWNhZGUuRGlyZWN0aW9uLkJPVFRPTSkKCiAgICAgICAgaWYgcG9zdHNfZW5kX2RldGVjdG9yLmFyZV9wb3N0c19lbmRlZCgpOgogICAgICAgICAgICBwcmludChDT0xPUl9PS0dSRUVOICsgZiJTY3JvbGxlZCAje2hhc2h0YWd9IHRvIHRoZSBlbmQsIGZpbmlzaC4iICsgQ09MT1JfRU5EQykKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICBwb3N0c19saXN0X3ZpZXcuc2Nyb2xsKERldmljZUZhY2FkZS5EaXJlY3Rpb24uQk9UVE9NKQoKCmRlZiBfb3Blbl9saWtlcnMoZGV2aWNlKToKICAgIGxpa2VzX3ZpZXcgPSBkZXZpY2UuZmluZChyZXNvdXJjZUlkPSdjb20uaW5zdGFncmFtLmFuZHJvaWQ6aWQvcm93X2ZlZWRfdGV4dHZpZXdfbGlrZXMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYW5kcm9pZC53aWRnZXQuVGV4dFZpZXcnKQogICAgaWYgbGlrZXNfdmlldy5leGlzdHMocXVpY2s9VHJ1ZSkgYW5kIGlzX2luX2ludGVyYWN0aW9uX3JlY3QobGlrZXNfdmlldyk6CiAgICAgICAgcHJpbnQoIk9wZW5pbmcgcG9zdCBsaWtlcnMiKQogICAgICAgIHJhbmRvbV9zbGVlcCgpCiAgICAgICAgbGlrZXNfdmlldy5jbGljaygpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIEZhbHNlCgoKY2xhc3MgUG9zdHNFbmREZXRlY3RvcjoKICAgIHByZXZfbGlrZXJzX2ZpcnN0X3NjcmVlbl91c2VybmFtZXMgPSBbXQogICAgbGlrZXJzX2ZpcnN0X3NjcmVlbl91c2VybmFtZXMgPSBbXQogICAgaXNfb25fbGlrZXJzX2ZpcnN0X3NjcmVlbiA9IEZhbHNlCgogICAgZGVmIG5vdGlmeV9saWtlcnNfb3BlbmVkKHNlbGYpOgogICAgICAgIHNlbGYuaXNfb25fbGlrZXJzX2ZpcnN0X3NjcmVlbiA9IFRydWUKICAgICAgICBzZWxmLnByZXZfbGlrZXJzX2ZpcnN0X3NjcmVlbl91c2VybmFtZXMuY2xlYXIoKQogICAgICAgIHNlbGYucHJldl9saWtlcnNfZmlyc3Rfc2NyZWVuX3VzZXJuYW1lcyArPSBzZWxmLmxpa2Vyc19maXJzdF9zY3JlZW5fdXNlcm5hbWVzCiAgICAgICAgc2VsZi5saWtlcnNfZmlyc3Rfc2NyZWVuX3VzZXJuYW1lcy5jbGVhcigpCiAgICAgICAgcGFzcwoKICAgIGRlZiBub3RpZnlfdXNlcm5hbWVfaXRlcmF0ZWQoc2VsZiwgdXNlcm5hbWUpOgogICAgICAgIGlmIHNlbGYuaXNfb25fbGlrZXJzX2ZpcnN0X3NjcmVlbjoKICAgICAgICAgICAgc2VsZi5saWtlcnNfZmlyc3Rfc2NyZWVuX3VzZXJuYW1lcy5hcHBlbmQodXNlcm5hbWUpCiAgICAgICAgcGFzcwoKICAgIGRlZiBhcmVfcG9zdHNfZW5kZWQoc2VsZik6CiAgICAgICAgc2VsZi5pc19vbl9saWtlcnNfZmlyc3Rfc2NyZWVuID0gRmFsc2UKICAgICAgICByZXR1cm4gc2VsZi5saWtlcnNfZmlyc3Rfc2NyZWVuX3VzZXJuYW1lcyA9PSBzZWxmLnByZXZfbGlrZXJzX2ZpcnN0X3NjcmVlbl91c2VybmFtZXMK')
exec(code)
