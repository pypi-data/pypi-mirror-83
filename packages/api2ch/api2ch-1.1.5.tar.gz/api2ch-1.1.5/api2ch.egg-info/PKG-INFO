Metadata-Version: 2.1
Name: api2ch
Version: 1.1.5
Summary: Async API Wrapper for 2ch Imageboard with typings
Home-page: https://github.com/uburuntu/api2ch
Author: uburuntu
Author-email: github@rmbk.me
License: MIT
Download-URL: https://github.com/uburuntu/api2ch/archive/master.zip
Description: # api2ch
        
        [![Python](https://img.shields.io/badge/Python-3.6%20%7C%203.7%20%7C%203.8-blue.svg?longCache=true)]()
        [![PyPI](https://img.shields.io/pypi/v/api2ch.svg)](https://pypi.python.org/pypi/api2ch)
        [![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
        
        [![Build Status](https://travis-ci.org/uburuntu/api2ch.svg?branch=master)](https://travis-ci.org/uburuntu/api2ch)
        
        ‚ö°Ô∏è Async API Wrapper for 2ch Imageboard with typings
        
        Docs: https://2ch.hk/api/res/1.html
        
        ![](https://i.imgur.com/VLbQhEv.jpg)
        
        ## üìù Table of Contents
        
        - [üéí Installation](#-installation)
        - [üõ† Examples](#-examples)
          - [Simple](#simple)
          - [Simple Async](#simple-async)
          - [Boards](#boards)
          - [Boards Async](#boards-async)
          - [Top threads](#top-threads)
          - [Top Threads Async](#top-threads-async)
          - [Complex](#complex)
          - [Complex Async](#complex-async)
        - [üìú Manual](#-manual)
          - [Methods](#methods)
          - [Types](#types)
          - [In case of unsupported types](#in-case-of-unsupported-types)
        - [üí¨ Contributing](#-contributing)
        - [üìù License](#-license)
        
        
        ---
        
        ## üéí Installation
        Just
        ```
        pip install api2ch
        ```
        
        ## üõ† Examples
        
        ### Simple
        
        ```python3
        from api2ch import Api2ch
        
        api = Api2ch()
        
        resp = api.threads('vg')
        for t in resp.threads[:3]:
            print(f'‚Äî {t.subject}, {t.posts_count} üí¨, {t.views} üëÅ')
        ```
        Output:
        ```text
        ‚Äî Paradox Thread ‚Ññ6 —Å—Ç—Ä–µ—Å—Å–æ–≤—ã–π, 771 üí¨, 1879 üëÅ
        ‚Äî BioWare General: Varric Tethras Edition, 207 üí¨, 644 üëÅ
        ‚Äî Fate/Grand Order #193, 683 üí¨, 4804 üëÅ
        ```
        
        ### Simple Async
        
        ```python3
        import asyncio
        
        from api2ch import Api2chAsync
        
        
        async def main():
            async with Api2chAsync() as api:
                resp = await api.threads('hw')
                for t in resp.threads[:3]:
                    print(f'‚Äî {t.subject}, {t.posts_count} üí¨, {t.views} üëÅ')
        
        
        asyncio.run(main())
        ```
        Output:
        ```text
        ‚Äî –í–∏–¥–µ–æ–∫–∞—Ä—Ç—ã AMD #95, 418 üí¨, 3778 üëÅ
        ‚Äî –°–∞–ø. –í–ø–µ—Ä–≤—ã–µ –≤ —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ. –ö–∞–∫ –Ω–∞—É—á–∏—Ç—Å—è —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –∂–µ–ª–µ–∑–µ?, 3 üí¨, 9 üëÅ
        ‚Äî –ù–æ—É—Ç–±—É–∫–æ—Ç—Ä–µ–¥ ‚Ññ36, 185 üí¨, 970 üëÅ
        ```
        
        ### Boards
        
        ```python3
        from api2ch import Api2ch
        
        api = Api2ch()
        
        for board in ('tv', 'hw', 'fiz'):
            c = api.catalog(board)
            print(f'/{c.board} | {c.board_name}, "{c.board_info_outer}", bump limit: {c.bump_limit}')
        ```
        Output:
        ```text
        /tv | –°–µ—Ä–∏–∞–ª—ã, "—Å–µ—Ä–∏–∞–ª—ã –¥–ª—è –¥–æ–º–æ—Ö–æ–∑—è–µ–∫, –∏–≥—Ä—ã –ø—Ä–µ—Å—Ç–æ–ª–æ–≤ –≤ /got/", bump limit: 500
        /hw | –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∂–µ–ª–µ–∑–æ, "–∂–µ–ª–µ–∑–æ, –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã, –Ω–æ—É—Ç–±—É–∫–∏, intel, amd, nvidia, ati", bump limit: 500
        /fiz | –§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞, "—Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä–∞, –∑–¥–æ—Ä–æ–≤—å–µ, —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å, –Ω–∞–±—Ä–∞—Ç—å –≤–µ—Å, –±–∏—Ü—É—Ö–∞", bump limit: 800
        ```
        
        ### Boards Async
        
        ```python3
        import asyncio
        
        from api2ch import Api2chAsync
        
        
        async def main():
            async with Api2chAsync() as api:
                coros = [api.catalog(board) for board in ('spc', 'un', 'math')]
        
                for coro in asyncio.as_completed(coros):
                    c = await coro
                    print(f'/{c.board} | {c.board_name}, "{c.board_info_outer}", bump limit: {c.bump_limit}')
        
        
        asyncio.run(main())
        ```
        Output:
        ```text
        /un | –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, "–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –≤—É–∑, —à–∫–æ–ª–∞, –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –≥–∏–∞, –µ–≥—ç, —É–∂–µ –Ω–µ —à–∫–æ–ª—å–Ω–∏–∫", bump limit: 500
        /spc | –ö–æ—Å–º–æ—Å –∏ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è, "–∫–æ—Å–º–æ—Å, –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è, –≤—Å–µ–ª–µ–Ω–Ω—ã–µ, –∑–≤–µ–∑–¥—ã, –æ–≥—É—Ä—Ü—ã", bump limit: 500
        /math | –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, "–î–æ—Å–∫–∞ –æ –º–æ–¥—É–ª—è—Ö –Ω–∞–¥ –∫–æ–ª—å—Ü–∞–º–∏, –ø—É—á–∫–∞—Ö –Ω–∞ –º–Ω–æ–≥–æ–æ–±—Ä–∞–∑–∏—è—Ö –∏ –≥–æ–º–æ–ª–æ–≥–∏—è—Ö —Å –∫–æ–≥–æ–º–æ–ª–æ–≥–∏—è–º–∏.", bump limit: 500
        ```
        
        ### Top threads
        
        ```python3
        from api2ch import Api2ch
        
        api = Api2ch()
        
        boards = api.boards_by_types()
        for board in boards.Art:
            threads = api.threads(board.id)
            top_thread = threads.sorted_by_views()[0]
            print(f'‚Äî /{threads.request.board} | {board.name} | Top thread: {top_thread.subject}, {top_thread.views} üëÅ')
        ```
        Output:
        ```text
        ‚Äî /di | –°—Ç–æ–ª–æ–≤–∞—è | Top thread: –ù–û–í–û–ô –ë–ê–ù–û–ß–ö–ò –ù–ò–¢–¨ –ò–î–ò, 123475 üëÅ
        ‚Äî /de | –î–∏–∑–∞–π–Ω | Top thread: –ó–∞—Ä–ø–ª–∞—Ç–∞, 48958 üëÅ
        ‚Äî /diy | –•–æ–±–±–∏ | Top thread: –ö—Ä–∏—Å—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Ç—Ä–µ–¥, 1620541 üëÅ
        ‚Äî /mus | –ú—É–∑—ã–∫–∞–Ω—Ç—ã | Top thread: –Ø–∑—ã—á–∫–æ–≤—ã—Ö —Ç—Ä–µ–¥., 153772 üëÅ
        ‚Äî /pa | –ñ–∏–≤–æ–ø–∏—Å—å | Top thread: –°—Ç–∞–ª–∏–Ω 3000, 40392 üëÅ
        ‚Äî /p | –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è | Top thread: –°—Å—ã–ª–∫–æ—Ç—Ä–µ–¥, 34182 üëÅ
        ‚Äî /wp | –û–±–æ–∏ –∏ –≤—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ | Top thread: –ú–∏–ª–∏—Ç–∞—Ä–∏ –ø–∞–∫, 38348 üëÅ
        ‚Äî /wrk | –†–∞–±–æ—Ç–∞ –∏ –∫–∞—Ä—å–µ—Ä–∞ | Top thread: –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω–∞ /zen —Ç—Ä–µ–¥ 11, 33648 üëÅ
        ```
        
        ### Top Threads Async
        
        ```python3
        import asyncio
        
        from api2ch import Api2chAsync
        
        
        async def main():
            async with Api2chAsync() as api:
                boards = await api.boards_by_types()
        
                coros = [api.threads(board.id) for board in boards.Technology]
        
                for coro in asyncio.as_completed(coros):
                    threads = await coro
                    top_thread = threads.sorted_by_views()[0]
                    print(f'‚Äî /{threads.request.board} | Top thread: {top_thread.subject}, {top_thread.views} üëÅ')
        
        
        asyncio.run(main())
        ```
        Output:
        ```text
        ‚Äî /ra | Top thread: OsmocomBB - Motorola, 1517590 üëÅ
        ‚Äî /hw | Top thread: VR —Ç—Ä–µ–¥ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–Ω—ã–π #4, 17638 üëÅ
        ‚Äî /t | Top thread: –í—ã–±–∏—Ä–∞–µ–º —Ä–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, 22336 üëÅ
        ‚Äî /s | Top thread: –§–æ—Ä–∫–∏ –ª–∏—Å–∞, 49613 üëÅ
        ‚Äî /pr | Top thread: –°–æ–≤–µ—Ç–æ–≤ –Ω—å—é—Ñ–∞–≥—É —Ç—Ä–µ–¥, 25838 üëÅ
        ‚Äî /gd | Top thread: –í —ç—Ç–æ–º —Ç—Ä–µ–¥–µ –∏—â–µ–º –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–∏—Ö, 38633 üëÅ
        ‚Äî /mobi | Top thread: PUBG MOBILE/–ü—É–ø–æ–∫ –º–æ–±–∞–π–ª-THREAD, 70643 üëÅ
        ```
        
        ### Complex
        
        ```python3
        import api2ch
        
        
        api = api2ch.Api2ch()
        
        
        def parse_post(url: str) -> str:
            valid, board, thread_id = api2ch.parse_url(url)
            if not valid:
                raise api2ch.Api2chError(404, 'Invalid URL')
        
            thread = api.thread(board, thread_id)
            post = thread.posts[0]
            text = ''
        
            text += f'{post.dt().isoformat()} | –ü–æ—Å—Ç ‚Ññ{post.post_id}: {post.url(thread.board)}:\n\n'
            text += f'{post.header}\n' if thread.enable_subject else ''
            text += f'{post.body_text}\n\n'
        
            if post.files:
                text += '–§–∞–π–ª—ã:\n'
                for f in post.files:
                    text += f'‚Äî {f.original_name}, {f.size_string}: {f.url()}\n'
        
            return text
        
        
        def pretty_print_post(url: str):
            try:
                text = parse_post(url)
            except api2ch.Api2chError as e:
                print('Request Error', e.code, e.reason)
            else:
                print(text)
        
        
        if __name__ == '__main__':
            pretty_print_post('https://2ch.hk/cg/res/1323206.html')
        ```
        Output:
        ```text
        2018-07-19T10:13:24 | –ü–æ—Å—Ç ‚Ññ1323206: https://2ch.hk/cg/res/1323206.html#1323206:
        
        –¢—Ä–µ–¥ –¥–ª—è –º–µ–∂–¥–æ—É—Å–æ–±–Ω—ã—Ö —Ö–æ–ª–∏–≤–∞—Ä–æ–≤
        –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –∞ —Ç–∞–∫ –∂–µ –ø–æ–º–æ–≥–∞–µ–º –Ω—å—é—Ñ–∞–≥–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å –≤—ã–±–æ—Ä–æ–º –ø—Ä–∏—Å—Ç–∞–≤–∫–∏ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏.
        
        –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –∫ –ø—Ä–æ—á—Ç–µ–Ω–∏—é FAQ —Ä–∞–∑–¥–µ–ª–∞: https://2ch.hk/faq/faq_cg.html
        
        –§–∞–π–ª—ã:
        ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.png, 84 –ö–±: https://2ch.hk/cg/src/1323206/15319844042830.png
        ```
        
        ### Complex Async
        
        [complex_async.py](examples/complex_async.py), same as previous but:
        - `api = api2ch.Api2chAsync()`
        - and `thread = await api.thread(board, thread_id)`
        
        
        ## üìú Manual
        
        ### Methods
        `Api2ch` methods (and same for `Api2chAsync` but with `async`):
        ```python3
        class Api2ch(Api2chBase):
            ...
            def thread(self, board: str, thread: Union[str, int]) -> ResponseThread:
                ...
            def threads(self, board: str) -> ResponseThreads:
                ...
            def catalog(self, board: str) -> ResponseCatalog:
                ...
            def catalog_by_date(self, board: str) -> ResponseCatalogByDate:
                ...
            def page(self, board: str, page: Union[str, int]) -> ResponsePage:
                ...
            def boards(self) -> ResponseBoards:
                ...
            def boards_by_types(self) -> ResponseBoardsByTypes:
                ...
            def thread_posts_by_num(self, board: str, thread: Union[str, int], num: Union[str, int]) -> ResponseThreadPostsByNum:
                ...
            def thread_posts_by_post(self, board: str, thread: Union[str, int], post: Union[str, int]) -> ResponseThreadPostsByPost:
                ...
            def single_post(self, board: str, post: Union[str, int]) -> ResponseSinglePost:
                ...
        ```
        
        Also available method `download_thread_media` (default path: `./dowloads_2ch/%thread_id%/`):
        ```python3
        from api2ch import download_thread_media
        
        download_thread_media(url='https://2ch.hk/api/res/1.html', with_thumbnails=True, skip_if_exists=True)
        ```
        
        ### Types
        This library uses [pydantic](https://github.com/samuelcolvin/pydantic/) for parsing API responses.
        You can see data models in [api2ch/models](api2ch/models).
        
        ### In case of unsupported types
        API results can change and the library may not parse the new result. So you can request ¬´raw¬ª dicts: 
        ```python3
        api = Api2ch(raw_results=True)
        ```
        
        ## üí¨ Contributing
        
        Contributions, issues and feature requests are welcome! 
        
        ## üìù License
        
        This project is [MIT](LICENSE) licensed.
        
Keywords: 2ch,dvach,api
Platform: all
Classifier: Development Status :: 5 - Production/Stable
Classifier: Framework :: AsyncIO
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Typing :: Typed
Description-Content-Type: text/markdown
Provides-Extra: dev
