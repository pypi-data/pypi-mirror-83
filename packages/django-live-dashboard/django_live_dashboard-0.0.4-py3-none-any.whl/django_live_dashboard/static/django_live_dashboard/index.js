(()=>{"use strict";var e={6553:(e,t,n)=>{var a=n(7294),r=n(4184),s=n.n(r),l=n(682),c=n(1703),o=n(7977),i=n(3727),m=n(5977),u=n(3935),d=n(2003),E=function(){function e(){var e=this;this.delegate=document.createDocumentFragment(),this.onOpen=function(){e.dispatchEvent(new CustomEvent("online",{detail:!0}))},this.onClose=function(){e.dispatchEvent(new CustomEvent("online",{detail:!1}))},this.onMessage=function(t){var n=JSON.parse(t.data);e.dispatchEvent(new CustomEvent("message",{detail:n}))};var t="ws:";"https:"===window.location.protocol&&(t="wss:"),this.socket=new d.Z(t+"//"+window.location.host+window.WS_PATH),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose)}return e.prototype.addEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.delegate.addEventListener.apply(this.delegate,e)},e.prototype.dispatchEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.delegate.dispatchEvent.apply(this.delegate,e)},e.prototype.removeEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.delegate.removeEventListener.apply(this.delegate,e)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}();E.getInstance();var v=function(){return(v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},h=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],l=0,c=s.length;l<c;l++,r++)a[r]=s[l];return a},f=E.getInstance(),p=a.createContext({requests:[],online:!1}),g=function(e,t){switch(t.type){case"ADD_REQUEST":return v(v({},e),{requests:h([t.request],e.requests)});case"SET_ONLINE":return v(v({},e),{online:t.online});default:throw e}};var N=n(8804),q=n(8538),y=n(5323),w=n(6597),_=n(3454),b=n(8375);q.Z.registerLanguage("json",y.Z),q.Z.registerLanguage("sql",w.Z);var L=function(e){var t=e.request;return t.queries.length?a.createElement("div",{className:"query-list"},t.queries.map((function(e){return a.createElement("div",{className:"query-item"},a.createElement("div",{className:"query-item__sql"},a.createElement(q.Z,{language:"sql",style:_.Z,showLineNumbers:!0},"--- Duration: "+(1e3*e.duration).toFixed(3)+"ms\n"+e.sql)))}))):a.createElement(b.Z,{variant:"secondary"},"No SQL Queries")},Z=function(e){var t=e.headers;return a.createElement("div",null,a.createElement(q.Z,{language:"json",style:_.Z,showLineNumbers:!0},JSON.stringify(t,null,2)))};const x=function(e){var t=e.request;return a.createElement("div",{className:"request-details"},a.createElement("div",{className:"request-meta"},a.createElement("dl",{className:"row"},a.createElement("dt",{className:"col-sm-3"},"Full Path"),a.createElement("dd",{className:"col-sm-9"},t.path),a.createElement("dt",{className:"col-sm-3"},"Status"),a.createElement("dd",{className:"col-sm-9"},t.status_code),a.createElement("dt",{className:"col-sm-3"},"Node Info"),a.createElement("dd",{className:"col-sm-9"},a.createElement("dl",{className:"row"},a.createElement("dt",{className:"col-sm-4"},"hostname"),a.createElement("dd",{className:"col-sm-8"},t.node_info.hostname),a.createElement("dt",{className:"col-sm-4"},"pid"),a.createElement("dd",{className:"col-sm-8"},t.node_info.pid))),a.createElement("dt",{className:"col-sm-3"},"Time"),a.createElement("dd",{className:"col-sm-9"},new Date(1e3*t.time).toISOString()),a.createElement("dt",{className:"col-sm-3"},"Duration"),a.createElement("dd",{className:"col-sm-9"},(1e3*t.duration).toFixed(3),"ms"))),a.createElement("div",{className:"request-headers"},a.createElement("dl",null,a.createElement("dt",null,"Request Headers"),a.createElement("dd",null,a.createElement(Z,{headers:t.request_headers})),a.createElement("dt",null,"Response Headers"),a.createElement("dd",null,a.createElement(Z,{headers:t.response_headers})))),a.createElement("div",{className:"request-queries"},a.createElement("dl",null,a.createElement("dt",null,"SQL Queries"),a.createElement("dd",null,a.createElement(L,{request:t})))))};var k=function(e){var t=e.request,n=new URL(t.path),r=Math.floor(t.status_code/100),l=a.useState(!1),c=l[0],o=l[1],i=a.useCallback((function(){o((function(e){return!e}))}),[o]);return a.createElement(a.Fragment,null,a.createElement("button",{className:"request-card",onClick:i},a.createElement("div",{className:"head"},a.createElement("div",{className:"path"},n.pathname),a.createElement("div",{className:"node-info"},t.node_info.hostname,"-",t.node_info.pid)),a.createElement("div",{className:"fields"},a.createElement("div",{className:"field"},(1e3*t.duration).toFixed(3),a.createElement("div",{className:"field-deco"},"ms")),a.createElement("div",{className:"field"},t.queries.length,a.createElement("div",{className:"field-deco"},"DB Queries"))),a.createElement("div",{className:"status"},a.createElement("div",{className:s()("field","status-field","status-field--"+r)},t.status_code))),a.createElement(N.Z,{show:c,onHide:o,scrollable:!0,centered:!0,size:"lg"},a.createElement(N.Z.Header,null,a.createElement(N.Z.Title,null,"Request details")),a.createElement(N.Z.Body,null,a.createElement(x,{request:t}))))};const C=function(){var e=a.useContext(p).requests;return a.createElement("div",null,e.map((function(e){return a.createElement(k,{request:e,key:""+e.time+e.node_info.hostname})})))};u.render(a.createElement(i.VK,{basename:window.ROOT_PATH},a.createElement((function(e){var t=e.children,n=a.useReducer(g,{requests:[],online:!1}),r=n[0],s=n[1],l=a.useCallback((function(e){var t=e.detail;"Request"===t.type&&s({type:"ADD_REQUEST",request:t})}),[s]),c=a.useCallback((function(e){s({type:"SET_ONLINE",online:e.detail})}),[s]);return a.useEffect((function(){return f.addEventListener("message",l),function(){f.removeEventListener("message",l)}}),[l]),a.useEffect((function(){return f.addEventListener("online",c),function(){f.removeEventListener("online",c)}}),[c]),a.createElement(p.Provider,{value:r},t)}),null,a.createElement((function(){var e=(0,m.TH)(),t=a.useContext(p),n=t.online,r=t.requests;return a.createElement("div",{className:"dld"},a.createElement("div",{className:"header"},a.createElement(l.Z,null,a.createElement("h1",null,"Django Live Dashboard"),a.createElement(c.Z,{className:"global-nav",activeKey:"/home",onSelect:function(e){return alert("selected "+e)}},a.createElement(c.Z.Item,null,a.createElement(c.Z.Link,{as:i.rU,to:"/",active:"/"===e.pathname},"System")),a.createElement(c.Z.Item,null,a.createElement(c.Z.Link,{as:i.rU,to:"/requests",active:e.pathname.startsWith("/requests")},"Request Logger ",a.createElement(o.Z,{variant:"primary"},r.length))),a.createElement(c.Z.Item,{className:"global-nav__online-status"},a.createElement(c.Z.Link,{className:s()({"global-nav__online-status--online":n,"global-nav__online-status--offline":!n})},n?"Connected":"Connecting"))))),a.createElement("div",{className:"container main"},a.createElement(m.rs,null,a.createElement(m.AW,{exact:!0,path:"/"},a.createElement("div",null,"System")),a.createElement(m.AW,{exact:!0,path:"/requests"},a.createElement(C,null)))))}),null))),document.getElementsByTagName("app")[0])}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0},t=[[6553,736]],a=()=>{};function r(){for(var a,r=0;r<t.length;r++){for(var s=t[r],l=!0,c=1;c<s.length;c++){var o=s[c];0!==e[o]&&(l=!1)}l&&(t.splice(r--,1),a=n(n.s=s[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),a}n.x=()=>{n.x=()=>{},l=l.slice();for(var e=0;e<l.length;e++)s(l[e]);return(a=r)()};var s=r=>{for(var s,l,[o,i,m,u]=r,d=0,E=[];d<o.length;d++)l=o[d],n.o(e,l)&&e[l]&&E.push(e[l][0]),e[l]=0;for(s in i)n.o(i,s)&&(n.m[s]=i[s]);for(m&&m(n),c(r);E.length;)E.shift()();return u&&t.push.apply(t,u),a()},l=self.webpackChunkdjango_live_dashboard=self.webpackChunkdjango_live_dashboard||[],c=l.push.bind(l);l.push=s})(),n.x()})();